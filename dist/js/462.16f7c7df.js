"use strict";(self["webpackChunklowcode_demo"]=self["webpackChunklowcode_demo"]||[]).push([[462],{2462:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var i=function(){var e=this,t=e._self._c;return"edit"==e.editMode?t("div",{staticClass:"v-text",on:{keydown:e.handleKeydown,keyup:e.handleKeyup}},[t("el-link",{ref:"text",class:{canEdit:e.canEdit},style:{verticalAlign:e.element.style.verticalAlign},attrs:{type:"primary",contenteditable:e.canEdit,tabindex:e.element.id},domProps:{innerHTML:e._s(e.element.propValue.text)},on:{dblclick:e.setEdit,paste:e.clearStyle,mousedown:e.handleMousedown,blur:e.handleBlur,input:e.handleInput,click:e.openLink}})],1):t("div",{staticClass:"v-text preview"},[t("el-link",{style:{verticalAlign:e.element.style.verticalAlign},attrs:{type:"primary"},domProps:{innerHTML:e._s(e.element.propValue.text)},on:{click:e.openLink}})],1)},l=[],o=n(6294),a=n(9657),s=n(7608),c={extends:s.Z,props:{propValue:{type:Object,require:!0,default:()=>{}},element:{type:Object,default:()=>{}}},data(){return{canEdit:!1,ctrlKey:17,isCtrlDown:!1}},computed:{...(0,o.mapState)(["editMode"])},methods:{openLink(){window.open(this.element.propValue.link)},handleInput(e){this.$emit("input",this.element,e.target.innerHTML)},handleKeydown(e){this.canEdit&&e.stopPropagation(),e.keyCode==this.ctrlKey?this.isCtrlDown=!0:(this.isCtrlDown&&this.canEdit&&a.k.includes(e.keyCode)||46==e.keyCode)&&e.stopPropagation()},handleKeyup(e){this.canEdit&&e.stopPropagation(),e.keyCode==this.ctrlKey&&(this.isCtrlDown=!1)},handleMousedown(e){this.canEdit&&e.stopPropagation()},clearStyle(e){e.preventDefault();const t=e.clipboardData,n=t.getData("text/plain")||"";""!==n&&document.execCommand("insertText",!1,n),this.$emit("input",this.element,e.target.innerHTML)},handleBlur(e){this.element.propValue.text=e.target.innerHTML||"&nbsp;";const t=e.target.innerHTML;""!==t?this.element.propValue.text=e.target.innerHTML:(this.element.propValue.text="",this.$nextTick((()=>{this.element.propValue.text="&nbsp;"}))),this.canEdit=!1},setEdit(){this.element.isLock||(this.canEdit=!0,this.selectText(this.$refs.text))},selectText(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}}},r=c,d=n(1001),h=(0,d.Z)(r,i,l,!1,null,"57d2fc54",null),p=h.exports},7608:function(e,t,n){n.d(t,{Z:function(){return d}});var i,l,o=n(4003),a={props:{linkage:{type:Object,default:()=>{}},element:{type:Object,default:()=>{}}},created(){this.linkage?.data?.length&&(o.Z.$on("v-click",this.onClick),o.Z.$on("v-hover",this.onHover),o.Z.$on("v-dblclick",this.onDblclick))},mounted(){const{data:e,duration:t}=this.linkage||{};e?.length&&(this.$el.style.transition=`all ${t}s`)},beforeDestroy(){this.linkage?.data?.length&&(o.Z.$off("v-click",this.onClick),o.Z.$off("v-hover",this.onHover),o.Z.$off("v-dblclick",this.onDblclick))},methods:{changeStyle(e=[]){e.forEach((e=>{e.style.forEach((e=>{e.key&&(this.element.style[e.key]=e.value)}))}))},onClick(e){const t=this.linkage.data.filter((t=>t.id===e&&"v-click"===t.event));this.changeStyle(t)},onDblclick(e){const t=this.linkage.data.filter((t=>t.id===e&&"v-dblclick"===t.event));console.log("v-dblclick"),this.changeStyle(t)},onHover(e){const t=this.linkage.data.filter((t=>t.id===e&&"v-hover"===t.event));this.changeStyle(t)}}},s=a,c=n(1001),r=(0,c.Z)(s,i,l,!1,null,null,null),d=r.exports}}]);
//# sourceMappingURL=462.16f7c7df.js.map