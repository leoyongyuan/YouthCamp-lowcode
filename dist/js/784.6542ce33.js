"use strict";(self["webpackChunklowcode_demo"]=self["webpackChunklowcode_demo"]||[]).push([[784],{2784:function(t,e,i){i.r(e),i.d(e,{default:function(){return r}});var l=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{overflow:"hidden"}},[e("canvas",{ref:"canvas",attrs:{id:"canvas_publish"}})])},n=[],a=i(7608),s={extends:a.Z,props:{propValue:{type:Object,required:!0,default:()=>{}},element:{type:Object,default:()=>{}}},data(){return{width:0,height:0,img:null,canvas:null,ctx:null}},watch:{"element.style.width":function(){this.drawImage()},"element.style.height":function(){this.drawImage()},"propValue.flip.vertical":function(){this.mirrorFlip()},"propValue.flip.horizontal":function(){this.mirrorFlip()},"propValue.url":function(){this.drawImage()}},mounted(){this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d"),this.drawImage()},methods:{drawImage(){const{width:t,height:e}=this.element.style;this.canvas.width=t,this.canvas.height=e,this.img=document.createElement("img"),this.img.src=this.propValue.url,this.img.onload=()=>{this.ctx.drawImage(this.img,0,0,t,e),this.mirrorFlip()}},mirrorFlip(){const{vertical:t,horizontal:e}=this.propValue.flip,{width:i,height:l}=this.element.style,n=e?-1:1,a=t?-1:1;this.ctx.clearRect(0,0,i,l),this.ctx.translate(i/2-i*n/2,l/2-l*a/2),this.ctx.scale(n,a),this.ctx.drawImage(this.img,0,0,i,l),this.ctx.setTransform(1,0,0,1,0,0)}}},c=s,h=i(1001),o=(0,h.Z)(c,l,n,!1,null,null,null),r=o.exports},7608:function(t,e,i){i.d(e,{Z:function(){return r}});var l,n,a=i(4003),s={props:{linkage:{type:Object,default:()=>{}},element:{type:Object,default:()=>{}}},created(){this.linkage?.data?.length&&(a.Z.$on("v-click",this.onClick),a.Z.$on("v-hover",this.onHover),a.Z.$on("v-dblclick",this.onDblclick))},mounted(){const{data:t,duration:e}=this.linkage||{};t?.length&&(this.$el.style.transition=`all ${e}s`)},beforeDestroy(){this.linkage?.data?.length&&(a.Z.$off("v-click",this.onClick),a.Z.$off("v-hover",this.onHover),a.Z.$off("v-dblclick",this.onDblclick))},methods:{changeStyle(t=[]){t.forEach((t=>{t.style.forEach((t=>{t.key&&(this.element.style[t.key]=t.value)}))}))},onClick(t){const e=this.linkage.data.filter((e=>e.id===t&&"v-click"===e.event));this.changeStyle(e)},onDblclick(t){const e=this.linkage.data.filter((e=>e.id===t&&"v-dblclick"===e.event));console.log("v-dblclick"),this.changeStyle(e)},onHover(t){const e=this.linkage.data.filter((e=>e.id===t&&"v-hover"===e.event));this.changeStyle(e)}}},c=s,h=i(1001),o=(0,h.Z)(c,l,n,!1,null,null,null),r=o.exports}}]);
//# sourceMappingURL=784.6542ce33.js.map